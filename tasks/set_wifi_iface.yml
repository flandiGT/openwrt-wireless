---
- name: set wifi-iface device
  uci:
    command: set
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "device"
    value: "{{device}}"
  when: device != {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: set wifi-iface network
  uci:
    command: set
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "network"
    value: "{{network}}"
  when: network != {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: set wifi-iface mode
  uci:
    command: set
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "mode"
    value: "{{mode}}"
  when: mode != {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: set wifi-iface ssid
  uci:
    command: set
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "ssid"
    value: "{{ssid}}"
  when: ssid != {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: set wifi-iface encryption
  uci:
    command: set
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "encryption"
    value: "{{encryption}}"
  when: encryption != {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: set wifi-iface key
  uci:
    command: set
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "key"
    value: "{{key}}"
  when: key != {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: remove wifi-iface key
  uci:
    command: delete
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "key"
  when: key == {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: set wifi-iface macfilter
  uci:
    command: set
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "macfilter"
    value: "{{macfilter}}"
  when: macfilter != {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: remove wifi-iface macfilter
  uci:
    command: delete
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "macfilter"
  when: macfilter == {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: set wifi-iface maclist
  uci:
    command: set_list
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "maclist"
    value: "{{maclist}}"
  when: maclist != {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless

- name: remove wifi-iface maclist
  uci:
    command: delete
    index: "{{index}}"
    config: "wireless"
    type: "wifi-iface"
    option: "maclist"
  when: maclist == {}
  notify:
    - uci commit wireless
    - reload network for openwrt-wireless
